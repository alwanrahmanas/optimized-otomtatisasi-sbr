# ğŸš€ SBR Autofill - Optimized Version

> **40-50% lebih cepat + Notifikasi WhatsApp otomatis**

---

## âš¡ Quick Start (3 Menit)

```bash
# 1. Install dependency
pip install pywhatkit

# 2. Replace 4 file optimized + tambah 1 file baru
#    (Lihat IMPLEMENTATION_GUIDE.md untuk detail)

# 3. Jalankan!
python sbr_fill.py --profile config/profile.production.json --wa-phone 081234567890
```

---

## ğŸ“‹ Files to Update

### Replace (4 files):
- `sbr_fill.py`
- `sbr_automation/autofill.py`
- `sbr_automation/form_filler.py`
- `sbr_automation/playwright_helpers.py`

### New (3 files):
- `sbr_automation/whatsapp_notifier.py`
- `config/profile.optimized.json`
- `config/profile.production.json`

---

## ğŸ¯ Key Features

### 1. Kecepatan Optimized
```
Before: ~8-10 detik/baris
After : ~4-6 detik/baris
Hemat : 40-50% âš¡
```

### 2. Notifikasi WhatsApp
- Otomatis setelah autofill selesai
- Ringkasan: sukses/error/skip
- Detail 3-5 error terakhir
- Browser terpisah (tidak ganggu automation)

### 3. Settings Optimal
```json
{
  "step_delay": 200,          // dari 700
  "pause_after_edit": 800,    // dari 1000
  "pause_after_submit": 200,  // dari 300
  "max_wait": 4000            // dari 6000
}
```

---

## ğŸ’» Usage

### Production Run
```bash
python sbr_fill.py --profile config/profile.production.json
```

### Custom Range
```bash
python sbr_fill.py --profile config/profile.production.json --start 1 --end 100
```

### Resume Mode
```bash
python sbr_fill.py --profile config/profile.production.json --resume
```

### Dry Run (Test)
```bash
python sbr_fill.py --profile config/profile.production.json --dry-run --start 1 --end 10
```

### Disable WhatsApp
```bash
python sbr_fill.py --profile config/profile.production.json --no-wa-notify
```

---

## ğŸ“± WhatsApp Setup

### First Time:
1. Login WhatsApp Web di browser DEFAULT
2. Centang "Keep me signed in"
3. Set `wa_phone` di profile atau CLI
4. Run automation

### Browser:
- **Browser automation**: Chrome CDP (port 9222)
- **Browser WhatsApp**: Browser DEFAULT (otomatis dibuka)
- **KEDUANYA TERPISAH!** âœ…

---

## ğŸ“Š Performance

| Baris | Before | After | Hemat |
|-------|--------|-------|-------|
| 100   | 15-17 min | 7-10 min | ~7 min |
| 500   | 75-85 min | 35-50 min | ~35 min |
| 1000  | 2.5 jam | 1.5 jam | **1 jam!** |

---

## ğŸ”§ Optimization Details

### playwright_helpers.py
- `slow_pause`: 700ms â†’ 200ms (**70% faster**)
- Retry: 3x â†’ 2x
- Retry delay: 200-300ms â†’ 100ms

### form_filler.py
- Field timeout: 2500ms â†’ 1200ms (**50% faster**)
- Select2 timeout: 3000ms â†’ 1500ms (**50% faster**)
- Identitas section: Sequential â†’ **Parallel** (**5x faster**)

### autofill.py
- Page transition: 800ms â†’ 500ms
- Return value untuk stats

---

## ğŸ†˜ Troubleshooting

### WhatsApp tidak terkirim?
```bash
# Cek install
pip list | findstr pywhatkit

# Test manual
python -c "import pywhatkit; print('OK')"
```

### Chrome CDP error?
```bash
chrome.exe --remote-debugging-port=9222
```

### Banyak timeout?
```json
{
  "max_wait": 6000,
  "pause_after_edit": 1200
}
```

### Field kelewat?
```json
{
  "step_delay": 300
}
```

---

## ğŸ“– Documentation

- **IMPLEMENTATION_GUIDE.md** - Panduan implementasi lengkap
- **QUICK_START.md** - Quick start guide
- **OPTIMIZATION_GUIDE.md** - Detail optimasi teknis

---

## âœ… Checklist

- [ ] pywhatkit installed
- [ ] Chrome running dengan CDP (port 9222)
- [ ] WhatsApp Web logged in (browser DEFAULT)
- [ ] 4 files replaced
- [ ] 3 new files created
- [ ] Profile configured (wa_phone)
- [ ] Test dengan 5-10 baris

---

## ğŸ‰ Example Output

```
Selesai.
  - Baris sukses    : 95
  - Baris bermasalah: 3
  - Baris dilewati  : 2
  - Log CSV         : artifacts/logs/2024-12-30/log_*.csv
  - Run ID          : autofill-001

========================================================================
ğŸ“± Mengirim notifikasi WhatsApp...
   Target: 081234567890
   Browser DEFAULT akan terbuka dalam 15 detik

[WhatsApp] âœ“ Pesan berhasil dijadwalkan untuk 14:30:15
âœ“ Notifikasi WhatsApp berhasil dijadwalkan
========================================================================
```

WhatsApp message:
```
ğŸ¤– SBR Autofill Selesai

ğŸ“Š Ringkasan:
Total: 100 baris
âœ… Sukses: 95
âŒ Error: 3
â­ï¸ Dilewati: 2

ğŸ”– Run ID: autofill-001
ğŸ“ Log: log_sbr_autofill_autofill-001.csv

âš ï¸ Error Terakhir:
1. Baris 12: CODE:SUBMIT_ERROR_FILL...
2. Baris 45: CODE:FORM_LOCKED...
3. Baris 78: CODE:CLICK_EDIT_TIMEOUT...

ğŸ• Selesai: 2024-12-30 14:45:23
```

---

**Happy Automating! ğŸš€**

Hemat 1 jam per 1000 baris! â±ï¸
